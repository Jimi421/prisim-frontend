import * as process from "node:process";
var at=Object.defineProperty;var nt=(e,t)=>()=>(e&&(t=e(e=0)),t);var it=(e,t)=>{for(var r in t)at(e,r,{get:t[r],enumerable:!0})};var fe={};it(fe,{default:()=>lt});function ot(e={}){let{incrementalCache:t,tagCache:r,queue:a,cachePurge:n,enableCacheInterception:i=!1,routePreloadingBehavior:o="none"}=e;return{default:{override:{wrapper:"cloudflare-node",converter:"edge",proxyExternalRequest:"fetch",incrementalCache:ce(t),tagCache:ue(r),queue:de(a),cdnInvalidation:st(n)},routePreloadingBehavior:o},edgeExternals:["node:crypto"],cloudflare:{useWorkerdCondition:!0},dangerous:{enableCacheInterception:i},middleware:{external:!0,override:{wrapper:"cloudflare-edge",converter:"edge",proxyExternalRequest:"fetch",incrementalCache:ce(t),tagCache:ue(r),queue:de(a)}}}}function ce(e="dummy"){return typeof e=="string"||typeof e=="function"?e:()=>e}function ue(e="dummy"){return typeof e=="string"||typeof e=="function"?e:()=>e}function de(e="dummy"){return typeof e=="string"||typeof e=="function"?e:()=>e}function st(e="dummy"){return typeof e=="string"||typeof e=="function"?e:()=>e}var lt,pe=nt(()=>{lt=ot({})});import{Buffer as ie}from"node:buffer";import{AsyncLocalStorage as Te}from"node:async_hooks";import{Buffer as Rt}from"node:buffer";import{Readable as I}from"node:stream";import"node:crypto";import"node:stream";import ze from"node:path";import"node:stream";import{createHash as nr}from"node:crypto";import"node:path";globalThis.Buffer=ie;globalThis.AsyncLocalStorage=Te;var ct=Object.defineProperty;Object.defineProperty=function(e,t,r){if(!(t==="__import_unsupported"&&globalThis.__import_unsupported))return ct(e,t,r)};globalThis.openNextDebug=!1;globalThis.openNextVersion="3.7.0";var ut=Object.create,oe=Object.defineProperty,dt=Object.getOwnPropertyDescriptor,ft=Object.getOwnPropertyNames,pt=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty,L=(e,t)=>()=>(e&&(t=e(e=0)),t),mt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),U=(e,t)=>{for(var r in t)oe(e,r,{get:t[r],enumerable:!0})},gt=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ft(t))!ht.call(e,n)&&n!==r&&oe(e,n,{get:()=>t[n],enumerable:!(a=dt(t,n))||a.enumerable});return e},wt=(e,t,r)=>(r=e!=null?ut(pt(e)):{},gt(t||!e||!e.__esModule?oe(r,"default",{value:e,enumerable:!0}):r,e));function H(e){try{return"__openNextInternal"in e}catch{return!1}}var yt=L(()=>{});function R(...e){globalThis.openNextDebug&&console.log(...e)}function xt(...e){console.warn(...e)}function J(...e){if(e.some(t=>_e(t)))return R(...e);if(e.some(t=>H(t))){let t=e.find(r=>H(r));return t.logLevel<vt()?void 0:t.logLevel===0?console.log(...e.map(r=>H(r)?`${r.name}: ${r.message}`:r)):t.logLevel===1?xt(...e.map(r=>H(r)?`${r.name}: ${r.message}`:r)):console.error(...e)}console.error(...e)}function vt(){switch((process.env.OPEN_NEXT_ERROR_LOG_LEVEL??"1").toLowerCase()){case"debug":case"0":return 0;case"error":case"2":return 2;default:return 1}}var he,_e,$=L(()=>{yt(),he=[{clientName:"S3Client",commandName:"GetObjectCommand",errorName:"NoSuchKey"}],_e=e=>he.some(t=>t.clientName===e?.clientName&&t.commandName===e?.commandName&&(t.errorName===e?.error?.name||t.errorName===e?.error?.Code))}),Et=mt(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=c,e.serialize=u;var t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{let l=function(){};return l.prototype=Object.create(null),l})();function c(l,p){let d=new o,w=l.length;if(w<2)return d;let y=p?.decode||s,g=0;do{let x=l.indexOf("=",g);if(x===-1)break;let v=l.indexOf(";",g),T=v===-1?w:v;if(x>T){g=l.lastIndexOf(";",x-1)+1;continue}let S=f(l,g,x),A=h(l,x,S),_=l.slice(S,A);if(d[_]===void 0){let C=f(l,x+1,T),b=h(l,T,C),P=y(l.slice(C,b));d[_]=P}g=T+1}while(g<w);return d}function f(l,p,d){do{let w=l.charCodeAt(p);if(w!==32&&w!==9)return p}while(++p<d);return d}function h(l,p,d){for(;p>d;){let w=l.charCodeAt(--p);if(w!==32&&w!==9)return p+1}return d}function u(l,p,d){let w=d?.encode||encodeURIComponent;if(!t.test(l))throw new TypeError(`argument name is invalid: ${l}`);let y=w(p);if(!r.test(y))throw new TypeError(`argument val is invalid: ${p}`);let g=l+"="+y;if(!d)return g;if(d.maxAge!==void 0){if(!Number.isInteger(d.maxAge))throw new TypeError(`option maxAge is invalid: ${d.maxAge}`);g+="; Max-Age="+d.maxAge}if(d.domain){if(!a.test(d.domain))throw new TypeError(`option domain is invalid: ${d.domain}`);g+="; Domain="+d.domain}if(d.path){if(!n.test(d.path))throw new TypeError(`option path is invalid: ${d.path}`);g+="; Path="+d.path}if(d.expires){if(!m(d.expires)||!Number.isFinite(d.expires.valueOf()))throw new TypeError(`option expires is invalid: ${d.expires}`);g+="; Expires="+d.expires.toUTCString()}if(d.httpOnly&&(g+="; HttpOnly"),d.secure&&(g+="; Secure"),d.partitioned&&(g+="; Partitioned"),d.priority)switch(typeof d.priority=="string"?d.priority.toLowerCase():void 0){case"low":g+="; Priority=Low";break;case"medium":g+="; Priority=Medium";break;case"high":g+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${d.priority}`)}if(d.sameSite)switch(typeof d.sameSite=="string"?d.sameSite.toLowerCase():d.sameSite){case!0:case"strict":g+="; SameSite=Strict";break;case"lax":g+="; SameSite=Lax";break;case"none":g+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${d.sameSite}`)}return g}function s(l){if(l.indexOf("%")===-1)return l;try{return decodeURIComponent(l)}catch{return l}}function m(l){return i.call(l)==="[object Date]"}});function bt(e){return e?typeof e=="string"?e.split(/(?<!Expires=\w+),/i).map(t=>t.trim()):e:[]}function $e(e){let t={};for(let[r,a]of e)r in t?Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]:t[r]=a;return t}var Q=L(()=>{});function Le(e){return $e(e.entries())}var Ae=L(()=>{Q()}),Oe={};U(Oe,{default:()=>ke});var me,ge,we,ke,Ct=L(()=>{me=wt(Et(),1),Q(),Ae(),ge=new Set([101,103,204,205,304]),we={convertFrom:async e=>{let t=new URL(e.url),r=t.searchParams,a=Le(r),n=await e.arrayBuffer(),i={};e.headers.forEach((s,m)=>{i[m]=s});let o=t.pathname,c=e.method,f=c!=="GET"&&c!=="HEAD",h=e.headers.get("cookie"),u=h?me.default.parse(h):{};return{type:"core",method:c,rawPath:o,url:e.url,body:f?Rt.from(n):void 0,headers:i,remoteAddress:e.headers.get("x-forwarded-for")??"::1",query:a,cookies:u}},convertTo:async e=>{if("internalEvent"in e){let a=new Request(e.internalEvent.url,{body:e.internalEvent.body,method:e.internalEvent.method,headers:{...e.internalEvent.headers,"x-forwarded-host":e.internalEvent.headers.host}});if(globalThis.__dangerous_ON_edge_converter_returns_request===!0)return a;let n=(e.isISR||e.internalEvent.rawPath.startsWith("/_next/image"))&&process.env.DISABLE_CACHE!=="true"?{cacheEverything:!0}:{};return fetch(a,{cf:n})}let t=new Headers;for(let[a,n]of Object.entries(e.headers)){if(a==="set-cookie"&&typeof n=="string"){let i=bt(n);for(let o of i)t.append(a,o);continue}if(Array.isArray(n))for(let i of n)t.append(a,i);else t.set(a,n)}let r=ge.has(e.statusCode)?null:e.body;return new Response(r,{status:e.statusCode,headers:t})},name:"edge"},ke=we}),Ne={};U(Ne,{default:()=>je});var ye,xe,je,Pt=L(()=>{ye={city:[encodeURIComponent,"x-open-next-city"],country:"x-open-next-country",regionCode:"x-open-next-region",latitude:"x-open-next-latitude",longitude:"x-open-next-longitude"},xe=async(e,t)=>async(r,a,n)=>{globalThis.process=process;for(let[f,h]of Object.entries(a))typeof h=="string"&&(process.env[f]=h);let i=await t.convertFrom(r),o=r.cf;for(let[f,h]of Object.entries(ye)){let u=o?.[f];if(u!=null){let[s,m]=Array.isArray(h)?h:[null,h];i.headers[m]=s?s(u):u}}let c=await e(i,{waitUntil:n.waitUntil.bind(n)});return await t.convertTo(c)},je={wrapper:xe,name:"cloudflare-edge",supportStreaming:!0,edgeRuntime:!0}}),Ie={};U(Ie,{default:()=>Me});var ve,Me,St=L(()=>{$(),ve={name:"env",resolve:async e=>{try{let t=JSON.parse(process.env.OPEN_NEXT_ORIGIN??"{}");for(let[r,a]of Object.entries(globalThis.openNextConfig.functions??{}).filter(([n])=>n!=="default"))if(a.patterns.some(n=>new RegExp(`/${n.replace(/\*\*/g,"(.*)").replace(/\*/g,"([^/]*)").replace(/\//g,"\\/").replace(/\?/g,".")}`).test(e)))return R("Using origin",r,a.patterns),t[r];return e.startsWith("/_next/image")&&t.imageOptimizer?(R("Using origin","imageOptimizer",e),t.imageOptimizer):t.default?(R("Using default origin",t.default,e),t.default):!1}catch(t){return J("Error while resolving origin",t),!1}}},Me=ve}),Ue={};U(Ue,{default:()=>qe});var Ee,qe,Tt=L(()=>{Ee={name:"dummy"},qe=Ee});function De(e,t){return I.toWeb(I.from(ie.from(e,t?"base64":"utf8")))}function N(){return process.env.OPEN_NEXT_FORCE_NON_EMPTY_RESPONSE==="true"?I.toWeb(I.from([ie.from("SOMETHING")])):I.toWeb(I.from([]))}var W=L(()=>{}),Be={};U(Be,{default:()=>Fe});var be,Fe,_t=L(()=>{W(),be={name:"fetch-proxy",proxy:async e=>{let{url:t,headers:r,method:a,body:n}=e,i=Object.fromEntries(Object.entries(r).filter(([f])=>f.toLowerCase()!=="cf-connecting-ip")),o=await fetch(t,{method:a,headers:i,body:n}),c={};return o.headers.forEach((f,h)=>{c[h]=f}),{type:"core",headers:c,statusCode:o.status,isBase64Encoded:!0,body:o.body??N()}}},Fe=be}),We={};U(We,{default:()=>$t});async function $t(e){let t=new URL(e.url).pathname,r=globalThis._ROUTES.find(n=>n.regex.some(i=>new RegExp(i).test(t)));if(!r)throw new Error(`No route found for ${e.url}`);let a=await(await self._ENTRIES[`middleware_${r.name}`]).default({page:r.page,request:{...e,page:{name:r.name}}});return globalThis.__openNextAls.getStore()?.pendingPromiseRunner.add(a.waitUntil),a.response}var Lt=L(()=>{globalThis._ENTRIES={},globalThis.self=globalThis,globalThis._ROUTES=[]});$();var Re=class{resolve;reject;promise;constructor(){let e,t;this.promise=new Promise((r,a)=>{e=r,t=a}),this.resolve=e,this.reject=t}},At=class{promises=[];withResolvers(){let e=new Re;return this.promises.push(e),e}add(e){let t=new Re;this.promises.push(t),e.then(t.resolve,t.reject)}async await(){R(`Awaiting ${this.promises.length} detached promises`),(await Promise.allSettled(this.promises.map(e=>e.promise))).filter(e=>e.status==="rejected").forEach(e=>{J(e.reason)})}};async function Ot(){let e=globalThis.__openNextAls.getStore(),t=e?.pendingPromiseRunner.await()??Promise.resolve();if(e?.waitUntil){e.waitUntil(t);return}await t}function kt(){let e=Symbol.for("@next/request-context"),t=Symbol.for("@vercel/request-context"),r=globalThis.__openNextAls.getStore(),a=r?.waitUntil??(i=>r?.pendingPromiseRunner.add(i)),n={get:()=>({waitUntil:a})};globalThis[e]=n,process.env.EMULATE_VERCEL_REQUEST_CONTEXT&&(globalThis[t]=n)}function Nt({isISRRevalidation:e,waitUntil:t,requestId:r=Math.random().toString(36)},a){return globalThis.__openNextAls.run({requestId:r,pendingPromiseRunner:new At,isISRRevalidation:e,waitUntil:t,writtenTags:new Set},async()=>{kt();let n;try{n=await a()}finally{await Ot()}return n})}$();$();async function jt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(Ct(),Oe))).default}async function It(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(Pt(),Ne))).default}async function Mt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(St(),Ie))).default}async function Ut(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(Tt(),Ue))).default}async function qt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(_t(),Be))).default}async function Dt(e){let t=await Promise.resolve().then(()=>(pe(),fe)).then(o=>o.default);globalThis.openNextConfig=t;let r=t[e.type]?.override,a=await jt(r?.converter),{name:n,wrapper:i}=await It(r?.wrapper);return R("Using wrapper",n),i(e.handler,a)}$();globalThis.__dirname??="";var Bt=ze.join(__dirname,".next"),Ft=ze.join(__dirname,".open-next");R({NEXT_DIR:Bt,OPEN_NEXT_DIR:Ft});var E={env:{},webpack:null,eslint:{ignoreDuringBuilds:!1},typescript:{ignoreBuildErrors:!1,tsconfigPath:"tsconfig.json"},distDir:".next",cleanDistDir:!0,assetPrefix:"",cacheMaxMemorySize:52428800,configOrigin:"next.config.js",useFileSystemPublicRoutes:!0,generateEtags:!0,pageExtensions:["tsx","ts","jsx","js"],poweredByHeader:!0,compress:!0,analyticsId:"",images:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1},devIndicators:{buildActivity:!0,buildActivityPosition:"bottom-right"},onDemandEntries:{maxInactiveAge:6e4,pagesBufferLength:5},amp:{canonicalBase:""},basePath:"",sassOptions:{},trailingSlash:!1,i18n:null,productionBrowserSourceMaps:!1,optimizeFonts:!0,excludeDefaultMomentLocales:!0,serverRuntimeConfig:{},publicRuntimeConfig:{},reactProductionProfiling:!1,reactStrictMode:!0,httpAgentOptions:{keepAlive:!0},outputFileTracing:!0,staticPageGenerationTimeout:60,swcMinify:!0,output:"standalone",modularizeImports:{"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"}},experimental:{multiZoneDraftMode:!1,prerenderEarlyExit:!1,serverMinification:!0,serverSourceMaps:!1,linkNoTouchStart:!1,caseSensitiveRoutes:!1,clientRouterFilter:!0,clientRouterFilterRedirects:!1,fetchCacheKeyPrefix:"",middlewarePrefetch:"flexible",optimisticClientCache:!0,manualClientBasePath:!1,cpus:13,memoryBasedWorkersCount:!1,isrFlushToDisk:!0,workerThreads:!1,optimizeCss:!1,nextScriptWorkers:!1,scrollRestoration:!1,externalDir:!1,disableOptimizedLoading:!1,gzipSize:!0,craCompat:!1,esmExternals:!0,fullySpecified:!1,outputFileTracingRoot:"/Users/braxtonbailey/Projects/prisim/prisim-frontend",swcTraceProfiling:!1,forceSwcTransforms:!1,largePageDataBytes:128e3,adjustFontFallbacks:!1,adjustFontFallbacksWithSizeAdjust:!1,typedRoutes:!1,instrumentationHook:!1,bundlePagesExternals:!1,parallelServerCompiles:!1,parallelServerBuildTraces:!1,ppr:!1,missingSuspenseWithCSRBailout:!0,optimizeServerReact:!0,useEarlyImport:!1,staleTimes:{dynamic:30,static:300},optimizePackageImports:["lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"],trustHostHeader:!1,isExperimentalCompile:!1},configFileName:"next.config.js"},He="gJkbw7BY91SnbyAze04B1",O={basePath:"",rewrites:{beforeFiles:[],afterFiles:[],fallback:[]},redirects:[{source:"/:path+/",destination:"/:path+",internal:!0,statusCode:308,regex:"^(?:/((?:[^/]+?)(?:/(?:[^/]+?))*))/$"}],routes:{static:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/gallery",regex:"^/gallery(?:/)?$",routeKeys:{},namedRegex:"^/gallery(?:/)?$"},{page:"/sketch",regex:"^/sketch(?:/)?$",routeKeys:{},namedRegex:"^/sketch(?:/)?$"},{page:"/upload",regex:"^/upload(?:/)?$",routeKeys:{},namedRegex:"^/upload(?:/)?$"}],dynamic:[{page:"/gallery/[slug]",regex:"^/gallery/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/gallery/(?<nxtPslug>[^/]+?)(?:/)?$"}],data:{static:[],dynamic:[]}},locales:[]},Wt=[],M={version:4,routes:{},dynamicRoutes:{},preview:{previewModeId:"84a3fe57a004719446ace0106d87b0cb",previewModeSigningKey:"43ecc5f882bf3fc3db51be32f9d01ba38ef7d4ba323875bd2b17876c5f57f387",previewModeEncryptionKey:"67212dd43f56d2a94d26968641a1bceeb467938c65f501c453826050537cbba1"},notFoundRoutes:[]},zt={version:3,middleware:{},functions:{},sortedMiddleware:[]},Ge={},Ht={version:1,functions:{}},Gt={"/_app":"pages/_app.js","/api/uploads":"pages/api/uploads.js","/gallery/[slug]":"pages/gallery/[slug].html","/gallery":"pages/gallery.html","/":"pages/index.html","/sketch":"pages/sketch.html","/upload":"pages/upload.html","/_error":"pages/_error.js","/_document":"pages/_document.js","/404":"pages/404.html"};process.env.NEXT_BUILD_ID=He;$();Q();Q();$();W();$();function Xt(e,t,r){let a=new Map,n=e.replace(/[ \t]/g,"");if(t){let u=0;for(let s of t){let m=s.toLowerCase();if(a.set(m,{orig:s,pos:u++}),r.prefixMatch){let l=m.split("-");for(;l.pop(),l.length>0;){let p=l.join("-");a.has(p)||a.set(p,{orig:s,pos:u++})}}}}let i=n.split(","),o=[],c=new Set;for(let u=0;u<i.length;++u){let s=i[u];if(!s)continue;let m=s.split(";");if(m.length>2)throw new Error(`Invalid ${r.type} header`);let l=m[0].toLowerCase();if(!l)throw new Error(`Invalid ${r.type} header`);let p={token:l,pos:u,q:1};if(t&&a.has(l)&&(p.pref=a.get(l).pos),c.add(p.token),m.length===2){let d=m[1],[w,y]=d.split("=");if(!y||w!=="q"&&w!=="Q")throw new Error(`Invalid ${r.type} header`);let g=Number.parseFloat(y);if(g===0)continue;Number.isFinite(g)&&g<=1&&g>=.001&&(p.q=g)}o.push(p)}o.sort((u,s)=>s.q!==u.q?s.q-u.q:s.pref!==u.pref?u.pref===void 0?1:s.pref===void 0?-1:u.pref-s.pref:u.pos-s.pos);let f=o.map(u=>u.token);if(!t||!t.length)return f;let h=[];for(let u of f)if(u==="*")for(let[s,m]of a)c.has(s)||h.push(m.orig);else{let s=u.toLowerCase();a.has(s)&&h.push(a.get(s).orig)}return h}function Xe(e="",t){return Xt(e,t,{type:"accept-language",prefixMatch:!0})[0]||void 0}function Kt(e){return E.i18n?.locales.includes(e.split("/")[1].toLowerCase())??!1}function Vt(e){let t=E.i18n,r=e.NEXT_LOCALE?.toLowerCase();return r?t?.locales.find(a=>r===a.toLowerCase()):void 0}function re({hostname:e,detectedLocale:t}){let r=E.i18n?.domains;if(!r)return;let a=t?.toLowerCase();for(let n of r){let i=n.domain.split(":",1)[0].toLowerCase();if(e===i||a===n.defaultLocale.toLowerCase()||n.locales?.some(o=>a===o.toLowerCase()))return n}}function K(e,t){let r=re({hostname:e.headers.host});if(t.localeDetection===!1)return r?.defaultLocale??t.defaultLocale;let a=Vt(e.cookies),n=Xe(e.headers["accept-language"],t?.locales);return R({cookiesLocale:a,preferredLocale:n,defaultLocale:t.defaultLocale,domainLocale:r}),r?.defaultLocale??a??n??t.defaultLocale}function Y(e){let t=E.i18n;return!t||Kt(e.rawPath)?e.rawPath:`/${K(e,t)}${e.rawPath}`}function Jt(e){let t=E.i18n;if(!t||t.localeDetection===!1||e.rawPath!=="/")return!1;let r=Xe(e.headers["accept-language"],t?.locales),a=K(e,t),n=re({hostname:e.headers.host}),i=re({detectedLocale:r});if(n&&i){let c=i.domain===n.domain,f=i.defaultLocale===r;if(!c||!f){let h=`http${i.http?"":"s"}`,u=f?"":r;return{type:"core",statusCode:307,headers:{Location:`${h}://${i.domain}/${u}`},body:N(),isBase64Encoded:!1}}}let o=n?.defaultLocale??t.defaultLocale;return a.toLowerCase()!==o.toLowerCase()?{type:"core",statusCode:307,headers:{Location:F(e.url,`/${a}`)},body:N(),isBase64Encoded:!1}:!1}function Qt(e,t,r){let a=Zt(e),n=a+=1831565813;n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61);let i=((n^n>>>14)>>>0)/4294967296,o=Math.floor(i*t);return`${r}-${o}`}function Yt(e){let t=Number.parseInt(process.env.MAX_REVALIDATE_CONCURRENCY??"10");return Qt(e,t,"revalidate")}function Zt(e){let t=1779033703,r=3144134277,a=1013904242,n=2773480762;for(let i=0,o;i<e.length;i++)o=e.charCodeAt(i),t=r^Math.imul(t^o,597399067),r=a^Math.imul(r^o,2869860233),a=n^Math.imul(a^o,951274213),n=t^Math.imul(n^o,2716044179);return t=Math.imul(a^t>>>18,597399067),r=Math.imul(n^r>>>22,2869860233),a=Math.imul(t^a>>>17,951274213),n=Math.imul(r^n>>>19,2716044179),t^=r^a^n,r^=t,a^=t,n^=t,t>>>0}function Ke(e,t){if(!e)return!1;let r=/^https?:\/\//;return t?r.test(e)&&!e.includes(t):r.test(e)}function er(e){if(e==="")return{};let t=e.split("&");return $e(t.map(r=>{let[a,n]=r.split("=");return[a,n]}))}function tr(e,t){if(!t){let n=/\/([^?]*)\??(.*)/,i=e.match(n);return{hostname:"",pathname:i?.[1]?`/${i[1]}`:e,protocol:"",queryString:i?.[2]??""}}let r=/^(https?:)\/\/?([^\/\s]+)(\/[^?]*)?(\?.*)?/,a=e.match(r);if(!a)throw new Error(`Invalid external URL: ${e}`);return{protocol:a[1]??"https:",hostname:a[2],pathname:a[3]??"",queryString:a[4]?.slice(1)??""}}function F(e,t){let r=E.basePath??"";return new URL(`${r}${t}`,e).href}function Ve(e){let t=[];return Object.entries(e).forEach(([r,a])=>{Array.isArray(a)?a.forEach(n=>t.push(`${r}=${n}`)):t.push(`${r}=${a}`)}),t.length>0?`?${t.join("&")}`:""}function rr(e,t){if(t?.functions?.["/_middleware"])return t.functions["/_middleware"].matchers?.map(({regexp:a})=>new RegExp(a))??[/.*/];let r=e.middleware["/"];return r?.matchers?r.matchers.map(({regexp:a})=>new RegExp(a)):[]}function G(e,{isPath:t}={}){let r=e.replaceAll("(.)","_\xB51_").replaceAll("(..)","_\xB52_").replaceAll("(...)","_\xB53_");return t?r:r.replaceAll("+","_\xB54_")}function Z(e){return e.replaceAll("_\xB51_","(.)").replaceAll("_\xB52_","(..)").replaceAll("_\xB53_","(...)").replaceAll("_\xB54_","+")}function ar(e,t){return e==="GET"||e==="HEAD"||!t?void 0:new ReadableStream({start(r){r.enqueue(t),r.close()}})}var Ce;(function(e){e.CACHE_CONTROL="cache-control",e.NEXT_CACHE="x-nextjs-cache"})(Ce||(Ce={}));$();W();$();async function ir(e,t,r){if(globalThis.openNextConfig.dangerous?.disableTagCache)return!1;if(!r.value)return!0;if("type"in r&&r.type==="page")return!1;let a=r.lastModified??Date.now();return globalThis.tagCache.mode==="nextMode"?await globalThis.tagCache.hasBeenRevalidated(t,a):await globalThis.tagCache.getLastModified(e,a)===-1}function or(e){if(!e)return[];try{return e.meta?.headers?.["x-next-cache-tags"]?.split(",")??[]}catch{return[]}}$();var q=60*60*24*365,Pe=60*60*24*30,sr="RSC, Next-Router-State-Tree, Next-Router-Prefetch, Next-Router-Segment-Prefetch, Next-Url";async function Je(e,t,r,a,n){let i=q,o=Object.entries(M.routes).find(u=>u[0]===e)?.[1];a===void 0&&o?i=o.initialRevalidateSeconds===!1?q:o.initialRevalidateSeconds:a!==void 0&&(i=a===!1?q:a);let c=Math.round((Date.now()-(n??0))/1e3),f=u=>nr("md5").update(u).digest("hex"),h=f(t);if(a===0)return{"cache-control":"private, no-cache, no-store, max-age=0, must-revalidate","x-opennext-cache":"ERROR",etag:h};if(i!==q){let u=Math.max(i-c,1);R("sMaxAge",{finalRevalidate:i,age:c,lastModified:n,revalidate:a});let s=u===1;if(s){let m=E.trailingSlash?`${e}/`:e;E.basePath&&(m=`${E.basePath}${m}`),await globalThis.queue.send({MessageBody:{host:r,url:m,eTag:h,lastModified:n??Date.now()},MessageDeduplicationId:f(`${e}-${n}-${h}`),MessageGroupId:Yt(e)})}return{"cache-control":`s-maxage=${u}, stale-while-revalidate=${Pe}`,"x-opennext-cache":s?"STALE":"HIT",etag:h}}return{"cache-control":`s-maxage=${q}, stale-while-revalidate=${Pe}`,"x-opennext-cache":"HIT",etag:h}}async function lr(e,t,r,a){R("Returning result from experimental cache");let n="",i="application/octet-stream",o=!1;switch(r.type){case"app":o=!!e.headers.rsc,n=o?r.rsc:r.html,i=o?"text/x-component":"text/html; charset=utf-8";break;case"page":o=!!e.query.__nextDataReq,n=o?JSON.stringify(r.json):r.html,i=o?"application/json":"text/html; charset=utf-8";break}let c=await Je(t,n,e.headers.host,r.revalidate,a);return{type:"core",statusCode:r.meta?.status??200,body:De(n,!1),isBase64Encoded:!1,headers:{...c,"content-type":i,...r.meta?.headers,vary:sr}}}function cr(e,t){return e.replace(new RegExp(`([/#?]${t?"|%(2f|23|3f|5c)":""})`,"gi"),r=>encodeURIComponent(r))}function ur(e){return e.split("/").map(t=>{try{return cr(decodeURIComponent(t),!0)}catch{return t}}).join("/")}async function dr(e){if(e.headers["next-action"]||e.headers["x-prerender-revalidate"])return e;let t=Y(e);E.basePath&&(t=t.replace(E.basePath,"")),t=t.replace(/\/$/,""),t=ur(t),R("Checking cache for",t,M);let r=Object.keys(M.routes).includes(t??"/")||Object.values(M.dynamicRoutes).some(a=>new RegExp(a.routeRegex).test(t));if(R("isISR",r),r)try{let a=await globalThis.incrementalCache.get(t??"/index");if(R("cached data in interceptor",a),!a?.value)return e;if(a.value?.type==="app"){let i=or(a.value);if(await ir(t,i,a))return e}let n=e.headers.host;switch(a?.value?.type){case"app":case"page":return lr(e,t,a.value,a.lastModified);case"redirect":{let i=await Je(t,"",n,a.value.revalidate,a.lastModified);return{type:"core",statusCode:a.value.meta?.status??307,body:N(),headers:{...a.value.meta?.headers??{},...i},isBase64Encoded:!1}}default:return e}}catch(a){return R("Error while fetching cache",a),e}return e}function fr(e){for(var t=[],r=0;r<e.length;){var a=e[r];if(a==="*"||a==="+"||a==="?"){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if(a==="\\"){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if(a==="{"){t.push({type:"OPEN",index:r,value:e[r++]});continue}if(a==="}"){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(a===":"){for(var n="",i=r+1;i<e.length;){var o=e.charCodeAt(i);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){n+=e[i++];continue}break}if(!n)throw new TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:n}),r=i;continue}if(a==="("){var c=1,f="",i=r+1;if(e[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<e.length;){if(e[i]==="\\"){f+=e[i++]+e[i++];continue}if(e[i]===")"){if(c--,c===0){i++;break}}else if(e[i]==="("&&(c++,e[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));f+=e[i++]}if(c)throw new TypeError("Unbalanced pattern at ".concat(r));if(!f)throw new TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:f}),r=i;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function Qe(e,t){t===void 0&&(t={});for(var r=fr(e),a=t.prefixes,n=a===void 0?"./":a,i=t.delimiter,o=i===void 0?"/#?":i,c=[],f=0,h=0,u="",s=function(C){if(h<r.length&&r[h].type===C)return r[h++].value},m=function(C){var b=s(C);if(b!==void 0)return b;var P=r[h],j=P.type,rt=P.index;throw new TypeError("Unexpected ".concat(j," at ").concat(rt,", expected ").concat(C))},l=function(){for(var C="",b;b=s("CHAR")||s("ESCAPED_CHAR");)C+=b;return C},p=function(C){for(var b=0,P=o;b<P.length;b++){var j=P[b];if(C.indexOf(j)>-1)return!0}return!1},d=function(C){var b=c[c.length-1],P=C||(b&&typeof b=="string"?b:"");if(b&&!P)throw new TypeError('Must have text between two parameters, missing text after "'.concat(b.name,'"'));return!P||p(P)?"[^".concat(k(o),"]+?"):"(?:(?!".concat(k(P),")[^").concat(k(o),"])+?")};h<r.length;){var w=s("CHAR"),y=s("NAME"),g=s("PATTERN");if(y||g){var x=w||"";n.indexOf(x)===-1&&(u+=x,x=""),u&&(c.push(u),u=""),c.push({name:y||f++,prefix:x,suffix:"",pattern:g||d(x),modifier:s("MODIFIER")||""});continue}var v=w||s("ESCAPED_CHAR");if(v){u+=v;continue}u&&(c.push(u),u="");var T=s("OPEN");if(T){var x=l(),S=s("NAME")||"",A=s("PATTERN")||"",_=l();m("CLOSE"),c.push({name:S||(A?f++:""),pattern:S&&!A?d(x):A,prefix:x,suffix:_,modifier:s("MODIFIER")||""});continue}m("END")}return c}function B(e,t){return pr(Qe(e,t),t)}function pr(e,t){t===void 0&&(t={});var r=se(t),a=t.encode,n=a===void 0?function(f){return f}:a,i=t.validate,o=i===void 0?!0:i,c=e.map(function(f){if(typeof f=="object")return new RegExp("^(?:".concat(f.pattern,")$"),r)});return function(f){for(var h="",u=0;u<e.length;u++){var s=e[u];if(typeof s=="string"){h+=s;continue}var m=f?f[s.name]:void 0,l=s.modifier==="?"||s.modifier==="*",p=s.modifier==="*"||s.modifier==="+";if(Array.isArray(m)){if(!p)throw new TypeError('Expected "'.concat(s.name,'" to not repeat, but got an array'));if(m.length===0){if(l)continue;throw new TypeError('Expected "'.concat(s.name,'" to not be empty'))}for(var d=0;d<m.length;d++){var w=n(m[d],s);if(o&&!c[u].test(w))throw new TypeError('Expected all "'.concat(s.name,'" to match "').concat(s.pattern,'", but got "').concat(w,'"'));h+=s.prefix+w+s.suffix}continue}if(typeof m=="string"||typeof m=="number"){var w=n(String(m),s);if(o&&!c[u].test(w))throw new TypeError('Expected "'.concat(s.name,'" to match "').concat(s.pattern,'", but got "').concat(w,'"'));h+=s.prefix+w+s.suffix;continue}if(!l){var y=p?"an array":"a string";throw new TypeError('Expected "'.concat(s.name,'" to be ').concat(y))}}return h}}function Ye(e,t){var r=[],a=Ze(e,r,t);return hr(a,r,t)}function hr(e,t,r){r===void 0&&(r={});var a=r.decode,n=a===void 0?function(i){return i}:a;return function(i){var o=e.exec(i);if(!o)return!1;for(var c=o[0],f=o.index,h=Object.create(null),u=function(m){if(o[m]===void 0)return"continue";var l=t[m-1];l.modifier==="*"||l.modifier==="+"?h[l.name]=o[m].split(l.prefix+l.suffix).map(function(p){return n(p,l)}):h[l.name]=n(o[m],l)},s=1;s<o.length;s++)u(s);return{path:c,index:f,params:h}}}function k(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function se(e){return e&&e.sensitive?"":"i"}function mr(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,n=r.exec(e.source);n;)t.push({name:n[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),n=r.exec(e.source);return e}function gr(e,t,r){var a=e.map(function(n){return Ze(n,t,r).source});return new RegExp("(?:".concat(a.join("|"),")"),se(r))}function wr(e,t,r){return yr(Qe(e,r),t,r)}function yr(e,t,r){r===void 0&&(r={});for(var a=r.strict,n=a===void 0?!1:a,i=r.start,o=i===void 0?!0:i,c=r.end,f=c===void 0?!0:c,h=r.encode,u=h===void 0?function(b){return b}:h,s=r.delimiter,m=s===void 0?"/#?":s,l=r.endsWith,p=l===void 0?"":l,d="[".concat(k(p),"]|$"),w="[".concat(k(m),"]"),y=o?"^":"",g=0,x=e;g<x.length;g++){var v=x[g];if(typeof v=="string")y+=k(u(v));else{var T=k(u(v.prefix)),S=k(u(v.suffix));if(v.pattern)if(t&&t.push(v),T||S)if(v.modifier==="+"||v.modifier==="*"){var A=v.modifier==="*"?"?":"";y+="(?:".concat(T,"((?:").concat(v.pattern,")(?:").concat(S).concat(T,"(?:").concat(v.pattern,"))*)").concat(S,")").concat(A)}else y+="(?:".concat(T,"(").concat(v.pattern,")").concat(S,")").concat(v.modifier);else{if(v.modifier==="+"||v.modifier==="*")throw new TypeError('Can not repeat "'.concat(v.name,'" without a prefix and suffix'));y+="(".concat(v.pattern,")").concat(v.modifier)}else y+="(?:".concat(T).concat(S,")").concat(v.modifier)}}if(f)n||(y+="".concat(w,"?")),y+=r.endsWith?"(?=".concat(d,")"):"$";else{var _=e[e.length-1],C=typeof _=="string"?w.indexOf(_[_.length-1])>-1:_===void 0;n||(y+="(?:".concat(w,"(?=").concat(d,"))?")),C||(y+="(?=".concat(w,"|").concat(d,")"))}return new RegExp(y,se(r))}function Ze(e,t,r){return e instanceof RegExp?mr(e,t):Array.isArray(e)?gr(e,t,r):wr(e,t,r)}function xr(e){let t=e.host+e.pathname;return`${e.protocol}//${t.replace(/\\/g,"/").replace(/\/\/+/g,"/")}${e.search}`}W();$();var vr=`^/(?:${O.locales.map(e=>`${e}/?`).join("|")})?`,Er=O.basePath?`^${O.basePath}/?`:"^/",br=vr.replace("^/",Er);function et(e){let t=e.map(n=>({page:n.page,regexp:new RegExp(n.regex.replace("^/",br))})),r=new Set,a=new Set;for(let[n,i]of Object.entries(Ge))n.endsWith("page")?r.add(i):n.endsWith("route")&&a.add(i);return function(n){return t.filter(i=>i.regexp.test(n)).map(i=>{let o="page";return r.has(i.page)?o="app":a.has(i.page)&&(o="route"),{route:i.page,type:o}})}}var ae=et([...O.routes.static,...Rr()]),ne=et(O.routes.dynamic);function Rr(){let e=n=>({page:n,regex:`^${n}(?:/)?$`}),t=new Set(O.routes.dynamic.map(({page:n})=>n)),r=Object.keys(Gt).filter(n=>n.startsWith("/api/")&&!t.has(n)).map(e),a=Object.values(Ge).filter(n=>n.startsWith("/api/")||n==="/api"&&!t.has(n)).map(e);return[...r,...a]}var tt=(e,t,r)=>a=>{switch(a.type){case"header":return!!e?.[a.key.toLowerCase()]&&new RegExp(a.value??"").test(e[a.key.toLowerCase()]??"");case"cookie":return!!t?.[a.key]&&new RegExp(a.value??"").test(t[a.key]??"");case"query":return r[a.key]&&Array.isArray(a.value)?a.value.reduce((n,i)=>n||new RegExp(i).test(r[a.key]),!1):new RegExp(a.value??"").test(r[a.key]??"");case"host":return e?.host!==""&&new RegExp(a.value??"").test(e.host);default:return!1}};function V(e,t,r=!1){return t?t.reduce((a,n)=>a===!1?!1:r?!e(n):e(n),!0):!0}var Cr=e=>t=>{R("value",t);let r=e(t);return r?r.params:{}},Pr=(e,t,r)=>a=>{if(!a.value)return{};let n=new RegExp(`^${a.value}$`),i=o=>o.match(n)?.groups??{};switch(a.type){case"header":return i(e[a.key.toLowerCase()]??"");case"cookie":return i(t[a.key]??"");case"query":return Array.isArray(r[a.key])?i(r[a.key].join(",")):i(r[a.key]??"");case"host":return i(e.host??"")}};function Se(e,t,r){if(!e)return r;let{params:a}=e;return Object.keys(a).length>0?t(a):r}function Sr(e,t){if(!t)return{};let r=tt(e.headers,e.cookies,e.query),a={},n=Y(e);for(let{headers:i,has:o,missing:c,regex:f,source:h,locale:u}of t){let s=u===!1?e.rawPath:n;if(new RegExp(f).test(s)&&V(r,o)&&V(r,c,!0)){let m=Ye(h)(s);i.forEach(l=>{try{let p=Se(m,B(l.key),l.key),d=Se(m,B(l.value),l.value);a[p]=d}catch{R(`Error matching header ${l.key} with value ${l.value}`),a[l.key]=l.value}})}}return a}function X(e,t){let{rawPath:r,headers:a,query:n,cookies:i,url:o}=e,c=Y(e),f=tt(a,i,n),h=Pr(a,i,n),u=t.find(p=>{let d=p.locale===!1?r:c;return new RegExp(p.regex).test(d)&&V(f,p.has)&&V(f,p.missing,!0)}),s=n,m=o,l=Ke(u?.destination);if(R("isExternalRewrite",l),u){let{pathname:p,protocol:d,hostname:w,queryString:y}=tr(u.destination,l),g=u.locale===!1?r:c;R("urlParts",{pathname:p,protocol:d,hostname:w,queryString:y});let x=B(G(p,{isPath:!0})),v=B(G(w)),T=B(G(y)),S={...Cr(Ye(G(u.source,{isPath:!0})))(g),...u.has?.reduce((P,j)=>Object.assign(P,h(j)),{}),...u.missing?.reduce((P,j)=>Object.assign(P,h(j)),{})},A=Object.keys(S).length>0,_=y,C=w,b=p;if(A&&(b=Z(x(S)),C=Z(v(S)),_=Z(T(S))),E.i18n&&!l){let P=b.replace(new RegExp(`^/(${E.i18n.locales.join("|")})`),"");P.startsWith("/api/")&&(b=P)}m=l?`${d}//${C}${b}`:new URL(b,e.url).href,s={...n,...er(_)},m+=Ve(s),R("rewrittenUrl",{rewrittenUrl:m,finalQuery:s,isUsingParams:A})}return{internalEvent:{...e,query:s,rawPath:new URL(m).pathname,url:m},__rewrite:u,isExternalRewrite:l}}function Tr(e){return e.rawPath.match(/(\\|\/\/)/)?{type:e.type,statusCode:308,headers:{Location:xr(new URL(e.url))},body:N(),isBase64Encoded:!1}:!1}function _r(e){if(new URL(e.rawPath,"http://localhost").host!=="localhost"||E.skipTrailingSlashRedirect||e.rawPath.startsWith("/api/"))return!1;let t=N();if(E.trailingSlash&&!e.headers["x-nextjs-data"]&&!e.rawPath.endsWith("/")&&!e.rawPath.match(/[\w-]+\.[\w]+$/g)){let r=e.url.split("?");return{type:e.type,statusCode:308,headers:{Location:`${r[0]}/${r[1]?`?${r[1]}`:""}`},body:t,isBase64Encoded:!1}}if(!E.trailingSlash&&e.rawPath.endsWith("/")&&e.rawPath!=="/"){let r=e.url.split("?");return{type:e.type,statusCode:308,headers:{Location:`${r[0].replace(/\/$/,"")}${r[1]?`?${r[1]}`:""}`},body:t,isBase64Encoded:!1}}return!1}function $r(e,t){let r=Tr(e);if(r)return r;let a=_r(e);if(a)return a;let n=Jt(e);if(n)return n;let{internalEvent:i,__rewrite:o}=X(e,t.filter(c=>!c.internal));if(o&&!o.internal)return{type:e.type,statusCode:o.statusCode??308,headers:{Location:i.url},body:N(),isBase64Encoded:!1}}function Lr(e,t){let{rawPath:r,query:a}=e,n=E.basePath??"",i=`${n}/_next/data/${t}`;if(r.startsWith("/_next/data")&&!r.startsWith(i))return{type:e.type,statusCode:404,body:De("{}"),headers:{"Content-Type":"application/json"},isBase64Encoded:!1};if(r.startsWith(i)&&r.endsWith(".json")){let o=`${n}${r.slice(i.length,-5).replace(/^\/index$/,"/")}`;return a.__nextDataReq="1",{...e,rawPath:o,query:a,url:new URL(`${o}${Ve(a)}`,e.url).href}}return e}function Ar(e,t){let{rawPath:r}=e,{dynamicRoutes:a,routes:n}=t,i=Object.entries(a).filter(([,{fallback:l}])=>l===!1),o=i.some(([,{routeRegex:l}])=>new RegExp(l).test(r)),c=E.i18n?.locales,f=c?.includes(r.split("/")[1])||c===void 0?r:`/${E.i18n?.defaultLocale}${r}`;f!=="/"&&E.trailingSlash&&f.endsWith("/")&&(f=f.slice(0,-1));let h=ae(f),u=i.map(([l])=>l),s=ne(f).filter(({route:l})=>!u.includes(l)),m=Object.keys(n).includes(f);return o&&!m&&h.length===0&&s.length===0?{event:{...e,rawPath:"/404",url:F(e.url,"/404"),headers:{...e.headers,"x-invoke-status":"404"}},isISR:!1}:{event:e,isISR:o||m}}W();Ae();var Or=zt,kr=Ht,Nr=rr(Or,kr);function jr(){return Promise.resolve().then(()=>(Lt(),We))}async function Ir(e,t,r=jr){let a=e.headers;if(a["x-isr"]&&a["x-prerender-revalidate"]===M.preview.previewModeId)return e;let n=Y(e);if(!Nr.some(g=>g.test(n)))return e;let i=new URL(n,e.url);i.search=t;let o=i.href,c=await(await r()).default({geo:{city:decodeURIComponent(a["x-open-next-city"]),country:a["x-open-next-country"],region:a["x-open-next-region"],latitude:a["x-open-next-latitude"],longitude:a["x-open-next-longitude"]},headers:a,method:e.method||"GET",nextConfig:{basePath:E.basePath,i18n:E.i18n,trailingSlash:E.trailingSlash},url:o,body:ar(e.method,e.body)}),f=c.status,h=c.headers,u={},s={},m=["x-middleware-override-headers","x-middleware-next","x-middleware-rewrite","content-encoding"],l="x-middleware-request-";h.forEach((g,x)=>{if(x.startsWith(l)){let v=x.substring(l.length);u[v]=g}else{if(m.includes(x.toLowerCase()))return;x.toLowerCase()==="set-cookie"?s[x]=s[x]?[...s[x],g]:[g]:s[x]=g}});let p=h.get("x-middleware-rewrite"),d=!1,w=e.query,y=e.url;if(p)if(y=p,Ke(y,e.headers.host))d=!0;else{let g=new URL(p);w=Le(g.searchParams),"__nextDataReq"in e.query&&(w.__nextDataReq=e.query.__nextDataReq)}if(!p&&!h.get("x-middleware-next")){let g=c.body??N();return{type:e.type,statusCode:f,headers:s,body:g,isBase64Encoded:!1}}return{responseHeaders:s,url:y,rawPath:new URL(y).pathname,type:e.type,headers:{...e.headers,...u},body:e.body,method:e.method,query:w,cookies:e.cookies,remoteAddress:e.remoteAddress,isExternalRewrite:d}}var le="x-middleware-response-",na=le.length,z="x-opennext-",Mr=`${z}initial-url`,ia=`${z}locale`,Ur=`${z}resolved-routes`,ee=`${z}request-id`,qr={"x-open-next-city":"x-vercel-ip-city","x-open-next-country":"x-vercel-ip-country","x-open-next-region":"x-vercel-ip-country-region","x-open-next-latitude":"x-vercel-ip-latitude","x-open-next-longitude":"x-vercel-ip-longitude"};function te(e,t){let r=D(e),a=e.headers,n=r?"":le;Object.entries(t).forEach(([i,o])=>{o&&(a[n+i]=Array.isArray(o)?o.join(","):o)})}async function Dr(e,{assetResolver:t}){try{for(let[p,d]of Object.entries(qr)){let w=e.headers[p];w&&(e.headers[d]=w)}for(let p of Object.keys(e.headers))(p.startsWith(z)||p.startsWith(le))&&delete e.headers[p];let r=Sr(e,Wt),a=Lr(e,He);if(D(a))return a;let n=$r(a,O.redirects);if(n)return n.headers.Location=new URL(n.headers.Location).href,R("redirect",n),n;let i=await Ir(a,new URL(e.url).search);if(D(i))return i;r={...i.responseHeaders,...r};let o=i.isExternalRewrite??!1;if(a=i,!o){let p=X(a,O.rewrites.beforeFiles);if(a=p.internalEvent,o=p.isExternalRewrite,!o){let d=await t?.maybeGetAssetResult?.(a);if(d)return te(d,r),d}}let c=ae(a.rawPath),f=!o&&c.length>0;if(!(f||o)){let p=X(a,O.rewrites.afterFiles);a=p.internalEvent,o=p.isExternalRewrite}let h=!1;if(!o){let p=Ar(a,M);a=p.event,h=p.isISR}let u=ne(a.rawPath),s=!o&&u.length>0;if(!(s||f||o)){let p=X(a,O.rewrites.fallback);a=p.internalEvent,o=p.isExternalRewrite}let m=a.rawPath.startsWith("/_next/image");if(f||s||o||m||ae(a.rawPath).length>0||ne(a.rawPath).length>0||(a={...a,rawPath:"/404",url:F(a.url,"/404"),headers:{...a.headers,"x-middleware-response-cache-control":"private, no-cache, no-store, max-age=0, must-revalidate"}}),globalThis.openNextConfig.dangerous?.enableCacheInterception&&!D(a)&&(R("Cache interception enabled"),a=await dr(a),D(a)))return te(a,r),a;te(a,r);let l=[...c,...u];return R("resolvedRoutes",l),{internalEvent:a,isExternalRewrite:o,origin:!1,isISR:h,resolvedRoutes:l,initialURL:e.url,locale:E.i18n?K(a,E.i18n):void 0}}catch(r){return J("Error in routingHandler",r),{internalEvent:{type:"core",method:"GET",rawPath:"/500",url:F(e.url,"/500"),headers:{...e.headers},query:e.query,cookies:e.cookies,remoteAddress:e.remoteAddress},isExternalRewrite:!1,origin:!1,isISR:!1,resolvedRoutes:[],initialURL:e.url,locale:E.i18n?K(e,E.i18n):void 0}}}function D(e){return e!=null&&"statusCode"in e}globalThis.internalFetch=fetch;globalThis.__openNextAls=new Te;var Br=async(e,t)=>{let r=globalThis.openNextConfig.middleware,a=await Mt(r?.originResolver),n=await qt(r?.override?.proxyExternalRequest),i=await Ut(r?.assetResolver),o=Math.random().toString(36);return Nt({isISRRevalidation:e.headers["x-isr"]==="1",waitUntil:t?.waitUntil,requestId:o},async()=>{let c=await Dr(e,{assetResolver:i});if("internalEvent"in c){if(R("Middleware intercepted event",e),!c.isExternalRewrite){let f=await a.resolve(c.internalEvent.rawPath);return{type:"middleware",internalEvent:{...c.internalEvent,headers:{...c.internalEvent.headers,[Mr]:e.url,[Ur]:JSON.stringify(c.resolvedRoutes),[ee]:o}},isExternalRewrite:c.isExternalRewrite,origin:f,isISR:c.isISR,initialURL:c.initialURL,resolvedRoutes:c.resolvedRoutes}}try{return n.proxy(c.internalEvent)}catch(f){return J("External request failed.",f),{type:"middleware",internalEvent:{...c.internalEvent,headers:{...c.internalEvent.headers,[ee]:o},rawPath:"/500",url:F(c.internalEvent.url,"/500"),method:"GET"},isExternalRewrite:!1,origin:!1,isISR:c.isISR,initialURL:c.internalEvent.url,resolvedRoutes:[{route:"/500",type:"page"}]}}}return c.headers[ee]=o,R("Middleware response",c),c})},Fr=await Dt({handler:Br,type:"middleware"}),oa={fetch:Fr};export{oa as default,Fr as handler};
